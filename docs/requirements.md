# 要件定義書

## はじめに

「物語るヒストリア」は、史実をベースに適度なフィクションを交えた物語を通じて、登場人物の視点で歴史を追体験できる「遊べる歴史学習アプリ」です。ゲーム感覚のUI/UXと物語への感情移入を通じて、従来の活字や年号暗記中心の学習方法が苦手なユーザーに新しい学びの形を提供します。

## 要件

### 要件1：物語進行システム

**ユーザーストーリー:** 歴史に興味があるユーザーとして、物語形式で歴史上の人物の視点から出来事を追体験したい。そうすることで、歴史をより身近に感じ、理解を深めることができる。

#### 受入基準

1. WHEN ユーザーが物語を開始する THEN システムはテキストベースの小説形式で物語進行画面を表示する
2. WHEN 物語の節目に到達する THEN システムは2〜3個の選択肢を表示する
3. WHEN ユーザーが選択肢を選ぶ THEN システムは選択に基づいて後の展開や結末を変化させる
4. WHEN 物語が進行中 THEN システムはテキストベースの小説形式で没入感のある体験を提供する

### 要件2：サポート機能（知恵袋）

**ユーザーストーリー:** 物語を読んでいるユーザーとして、登場人物や専門用語について詳しく知りたい時がある。そのため、いつでも簡単に解説情報にアクセスできる機能が欲しい。

#### 受入基準

1. WHEN ユーザーが物語進行画面にいる THEN システムはサポート機能を呼び出すボタンを表示する
2. WHEN ユーザーがサポート機能ボタンを押す THEN システムは登場人物の紹介、専門用語の解説、関連する出来事の背景、勢力図や地図を含むモーダルウィンドウを表示する
3. WHEN サポート機能が表示される THEN システムは人物/用語/地図などのタブで情報を切り替え可能にする
4. WHEN ユーザーがサポート機能を閉じる THEN システムは物語進行画面に戻る

### 要件3：物語選択機能

**ユーザーストーリー:** アプリを使うユーザーとして、プレイしたい時代や人物の物語を選択したい。そうすることで、自分の興味に合った歴史学習ができる。

#### 受入基準

1. WHEN ユーザーがアプリを起動する THEN システムはタイトル画面を表示する
2. WHEN ユーザーがスタートボタンを押す THEN システムは物語選択画面を表示する
3. WHEN 物語選択画面が表示される THEN システムはプレイ可能な物語（初期は「幕末編 坂本龍馬」）のバナーを表示する
4. WHEN ユーザーが物語を選択する THEN システムは選択された物語の進行画面に遷移する
5. IF 将来的に複数の物語が追加される THEN システムはクリア状況が一覧でわかる表示を提供する

### 要件4：マネタイズ機能

**ユーザーストーリー:** 基本的には無料でアプリを楽しみたいが、広告が気になる場合は有料で広告を非表示にしたい。そうすることで、より快適に物語を楽しむことができる。

#### 受入基準

1. WHEN ユーザーが無料版を利用する THEN システムは章の合間などに広告を表示する
2. WHEN ユーザーが課金オプションを選択する THEN システムは物語ごとの買い切り価格（例：480円）で広告非表示オプションを提供する
3. WHEN ユーザーが広告非表示オプションを購入する THEN システムは該当物語の広告を永久に非表示にする
4. WHEN 課金案内が必要 THEN システムは広告非表示オプションのメリットと購入ボタンを含む画面を表示する

### 要件5：コンテンツ管理（MVP版）

**ユーザーストーリー:** 幕末の歴史に興味があるユーザーとして、坂本龍馬を主人公とした物語を通じて幕末の出来事を学びたい。

#### 受入基準

1. WHEN MVPがリリースされる THEN システムは幕末時代の坂本龍馬を主人公とした物語を提供する
2. WHEN 物語が進行する THEN システムは勝海舟、中岡慎太郎、西郷隆盛、お龍などの登場人物を物語の進行に合わせて登場させる
3. WHEN 主要人物が登場する THEN システムはサポート機能で該当人物の解説を提供する
4. WHEN 物語が完結する THEN システムはユーザーの選択に基づいた複数の結末を提供する

### 要件6：プラットフォーム対応

**ユーザーストーリー:** モバイルデバイスを使うユーザーとして、iOSとAndroidの両方でアプリを利用したい。

#### 受入基準

1. WHEN アプリが開発される THEN システムはiOSプラットフォームで動作する
2. WHEN アプリが開発される THEN システムはAndroidプラットフォームで動作する
3. WHEN ユーザーがモバイルデバイスでアプリを使用する THEN システムはタッチ操作に最適化されたUIを提供する
4. WHEN アプリがモバイル環境で動作する THEN システムは適切なパフォーマンスと応答性を維持する